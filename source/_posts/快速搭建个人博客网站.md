---
title: 快速搭建个人博客网站
top: false
cover: false
toc: true
mathjax: true
date: 2024-06-18 12:53:07
password:
summary:
tags: git, obsidian, hexo, fluid
categories:
---

# 背景需求

一直在寻找一个合适的平台记录自己的学习笔记、技术开发经验以及日常阅读写作等，尝试了诸多方案，笔记软件类的印象笔记、飞书、Notion、wolai、flomo、obsidian，总觉得少些什么，在封闭的软件中似乎少了一些输出端的监督，后搬运了几篇文章到公众号，但是修改有限制，且引用外部链接不方便。于是乎决定干脆自己搭一个博客网站，考察了很多方案，也参考了很多教程经验，最终选用github+hexo+obdian的框架，主要是因为这三个工具都有一定的使用基础，在学习前端的过程中逐渐熟悉了nodejs，git也是长期在用的版本管理工具，再加上之前也使用了很长一段时间的obsidian做知识管理，有了以上的基础后，便将这个搭建网站这个想法付诸实践。本篇文章主要记录个人搭建博客网站的步骤和参考的教程。
目前因为经济方面的原因，没有购买域名，暂时借助github pages实现免费托管。

# 安装配置
网站框架依赖的工具包括hexo、github、obsidian，下面依次介绍这三者的安装配置过程。
涉及到终端、yml等配置文件的编辑时使用的工具为[vscode](https://code.visualstudio.com/)，也可以使用电脑自带的终端/命令行工具和编辑器。
## Hexo
[hexo](https://hexo.io/zh-cn/docs/one-command-deployment)是基于Node.js编写的静态网站生成器，在发布和部署网页时需要用到git分布式管理工具，因此我们需要先安装两个依赖：
- git
- Node.js
### git安装
到[git官网](https://git-scm.com/download/)下载对应系统版本的安装包或根据官网指引安装。安装完成后在终端输入`git -v`，如果能正确显示git版本说明安装成功。
### Node.js安装
首先安装Node.js，到[Node.js官网](https://nodejs.cn/download/)选择下载系统适用的版本，按照安装程序指引一步步安装即可。
![](image-20240618193622234.png)

安装完成后，在终端中依次输入：
```bash
node -v
npm -v
```
如果显示node和npm版本，说明正确安装。在安装Node时，会同时安装npm，npm是node的包管理工具。我这里安装的node版本是`v20.13.1`，npm版本是v10.5.2。

![](image-20240618194011460.png)
### Hexo安装
使用npm包管理工具安装Hexo，由于npm仓库服务器在国外，下载速度较慢，先修改npm的镜像源为阿里镜像：
```bash
npm config set registry https://registry.npm.taobao.org
```

npm有多个安装选项：
>-S/--save 局部安装，发布到生产环境，写入到package.json文件中的dependencie里
>-D/--save-dev 局部安装，发布到开发环境， 写入到package.json文件中的devDependencies 里
>-g 全局安装，安装一次，其他地方也能使用

我们全局安装Hexo
```bash
npm install hexo-cli -g
hexo -v #打印hexo版本说明安装成功
```
![](image-20240618204259093.png)

在本地创建一个文件夹，用于存放你的博客站点文章和配置文件，比如`my-blog`。打开终端输入：
```bash
mkdir my-blog && cd my-blog
#初始化文件夹
hexo init
#安装必备的组件
npm install
#生成静态网页
hexo g
#打开本地服务器
hexo s
```
执行上述命令后，打开`localhost:8000`即可看到原始的博客网站效果，只有一个Hellow world页面。

## git+github配置
### git连接配置
在上一节中，我们安装了git工具，由于我们的网站是借助`Github Pages`托管，所以先去[github](https://github.com/)上注册一个账号，然后连接本地git仓库和远程github仓库，打开终端输入（windows用户打开git bash进行输入）：
```bash
git config --global user.name "yourname" #修改为你的github账号名
git config --global user.email "youremail" #修改为你的github账号邮箱
```
配置完成后，可使用如下命令验证能否登录github：
```bash
ssh -T git@github.com
```
按照提示输入用户名和密码后，如果出现以下内容，说明连接成功。
![](image-20240618210158068.png)


在本地生成SSH密钥，用于向远程仓库推送内容。
```bash
ssh-keygen -t rsa -C "youremail"

#生成之后复制SSH公钥
cat ~/.ssh/id_rsa.pub
```
登录github，点击头像-settings，粘贴公钥
![](image-20240618211935184.png)
如果github无法登录或访问速度太慢，可参考这篇帖子[如何解决mac无法访问github_mac打不开github-CSDN博客](https://blog.csdn.net/elena_705/article/details/135172231)
### 新建github.io仓库
接下来我们新建一个github仓库，点击+号新建仓库。
![](image-20240618212022198.png)
注意仓库的名字前缀一定要和你的账户名相同，后缀就是github.io。
![](image-20240618212413299.png)
创建完成后，进入仓库，点击settings-pages
![](image-20240618212456346.png)

![](image-20240618212640334.png)
使用默认的Branch配置，可以看到对应的`github pages`地址，比如我的是`https://lexieisfree.github.io`。

### 安装`hexo-deployer-git`插件
安装该插件后我们可以将博客网页内容托管到`Github pages`，就不用时刻在本地运行服务器啦。
我们在上文创建的博客文件夹（比如我是my-blog）下使用生产环境安装`hexo-deployer-git`插件：
```bash
npm install --save `hexo-deployer-git`
```
打开`_config.yml`配置文件添加如下内容：
```yml
deploy: type: git repo: git@github.com:lexieisfree/lexieisfree.github.io.git #修改为你的git仓库地址
branch: main   
```

注意，deploy配置仓库地址一定要用git地址(ssh连接地址), github 2021年8月之后就不支持http密码验证登录。

配置完成后，我们在my-blog（你的博客文件夹下）使用终端运行：
```bash
hexo d
```
即可将内容部署到github.io仓库中。
## Fluid主题配置
我的博客站点使用[fluid](https://hexo.fluid-dev.com/docs/guide/#%E5%85%B3%E4%BA%8E%E6%8C%87%E5%8D%97)主题，在生产环境安装`hexo-theme-fluid`
```bash
npm install --save hexo-theme-fluid
```

Hexo 5.0.0 版本以上的用户，在博客目录下创建 `_config.fluid.yml` 文件，将主题配置文件`_config.yml`的全部配置（或部分配置）复制过去。

基本配置可参考：[开始使用 | Hexo Fluid 用户手册 (fluid-dev.com)](https://hexo.fluid-dev.com/docs/start/#%E4%B8%BB%E9%A2%98%E7%AE%80%E4%BB%8B)

- 在`_config.yml`中指定主题
```yml
theme: fluid
```

- 添加「关于页」
```bash
#终端输入
hexo new page about
```
创建成功后修改 `/source/about/index.md`，添加 `layout` 属性。

修改后的文件示例如下：

```
---
title: 标题
layout: about
---

这里写关于页的正文，支持 Markdown, HTML
```

- 配置标题（在`_config.fluid.yml`中修改对应内容）
```yml
# Site
title: 修改为你的博客标题
subtitle: ''
description: ''
keywords:
author: 修改为你的名字
language: zh-CN
timezone: ''

navbar:
	blog_title: 修改为你的博客标题
```
- 给自己加个slogan
```yml
index:
	slogan:
		enable: true
		text: 修改为你的slogan
		api:
		enable: false
		url: "https://v1.hitokoto.cn/"
		method: "GET"
		headers: {}
		keys: ["hitokoto"]
```

其他的个性化配置可以参考[fluid官方文档](https://hexo.fluid-dev.com/docs/guide/)

## obsidian配置
其实这一步不是必要的，只是我个人喜欢用obsidian编辑markdown文档，如果你也想用obsidian编辑你的博客文章可以参考。
obsidian安装包[下载](https://thoughts.teambition.com/share/62a131711a6baa00416a79d3#title=Obsidian_%E5%AE%89%E8%A3%85%E5%8C%85)
obsidian的基础用法不再过多赘述，具体可以参考这篇帖子：[PKMer_Obsidian](https://pkmer.cn/Pkmer-Docs/10-obsidian/obsidian/)

在Hexo安装一节中我们创建了一个博客目录my-blog，该目录包含如下文件：
![](image-20240618223842003.png)
其中，source文件夹在存放了发布的文章（_posts）和草稿(_drafts)，scaffolds存放模板文件。
我们使用obsidian打开my-blog/source文件夹。


在使用obsidian之前，先安装必要的插件：
- `PKMer`主要是为了后续安装插件更方便：[PKMer_PKMer 插件主题市场](https://pkmer.cn/products/market/)
- `custom Attachment Location`： 使用该插件可以在粘贴图片到文章时自动修改图片的存放位置，比如文章的同名文件夹下。
![](image-20240618222851091.png)

`custom Attachment Location`插件配置：

![](image-20240618223151710.png)


# 发布文章
接下来，就可以愉快地写文章发布啦。
hexo的使用可参考官方文档：[指令 | Hexo](https://hexo.io/zh-cn/docs/commands)

### 创建博客文章
终端在博客目录下输入命令：
```bash
#创建新博客，执行完成后会在source/_posts文件夹下生成对应的md文档和同名目录
hexo new post 文章标题  

#创建博客草稿
hexo new draft 草稿标题
#草稿发布
hexo publish 草稿标题
```
用obsdian打开source文件夹，编辑文章。

## 生成发布文章
```bash
hexo clean #清除缓存
hexo generate 或 hexo g #生成静态文件
hexo server 或hexo s #本地运行服务器预览网页
hexo deploy 或hexo d #静态文件上传到远程服务器
```
## 删除文章
在`my-blog/source/_posts`直接删除文章和对应文件夹（可在obsidian中直接删除）。

重新执行如下命令：

```Bash
hexo clean
hexo g
hexo d  
```
# 参考资料
- [关于我使用obsidian加hexo部署个人博客的过程 - SagiRastar's Blog (sagi-rastar.github.io)](https://sagi-rastar.github.io/2023/11/10/%E5%85%B3%E4%BA%8E%E6%88%91%E4%BD%BF%E7%94%A8obsidian%E5%8A%A0hexo%E9%83%A8%E7%BD%B2%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E8%BF%87%E7%A8%8B/)
- [超详细Hexo+Github博客搭建小白教程 | 韦阳的博客 (godweiyang.com)](https://godweiyang.com/2018/04/13/hexo-blog/)
- [HEXO系列教程 | 使用GitHub部署静态博客HEXO | 小白向教程 – 夜梦星尘の折腾日记 (yemengstar.com)](https://tech.yemengstar.com/hexo-tutorial-deploy-githubpages-beginner/)

衷心感谢上述博主的分享。